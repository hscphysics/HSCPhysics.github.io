<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Mastery - Complete HSC Syllabus</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Space+Mono:wght@400;700&family=Fraunces:opsz,wght@9..144,300;9..144,600;9..144,700&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-tertiary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent-1: #00ff88;
            --accent-2: #00ccff;
            --accent-3: #ff0066;
            --accent-4: #ffaa00;
            --border-color: #2a2a2a;
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff0066;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        header {
            padding: 30px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .logo {
            font-family: 'Fraunces', serif;
            font-size: 2.5em;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }

        .tagline {
            color: var(--text-secondary);
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .tab-nav {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding: 4px;
            background: var(--bg-secondary);
            border-radius: 12px;
            scrollbar-width: thin;
        }

        .tab-btn {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .tab-btn.active {
            background: var(--accent-1);
            color: var(--bg-primary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 250px), 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .stat-card:hover {
            border-color: var(--accent-1);
            transform: translateY(-2px);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-1);
        }

        .stat-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: var(--accent-1);
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 0.85em;
            color: var(--success);
        }

        .stat-trend {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .insight-card {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), rgba(0, 204, 255, 0.05));
            border: 1px solid var(--accent-1);
            border-radius: 12px;
            padding: 20px;
        }

        .insight-icon {
            font-size: 1.5em;
            margin-bottom: 8px;
        }

        .insight-title {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--accent-1);
        }

        .insight-text {
            font-size: 0.85em;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .topic-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .topic-card:hover {
            border-color: var(--accent-1);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 255, 136, 0.1);
        }

        .topic-icon {
            font-size: 2em;
            margin-bottom: 12px;
        }

        .topic-title {
            font-size: 1.1em;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .topic-description {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .topic-progress {
            width: 100%;
            height: 4px;
            background: var(--bg-tertiary);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .topic-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
            transition: width 0.3s;
        }

        .topic-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        .practice-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 200px), 1fr));
            gap: 12px;
            margin-bottom: 30px;
        }

        .action-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .action-card:hover {
            border-color: var(--accent-1);
            transform: translateY(-4px);
        }

        .action-icon {
            font-size: 2.5em;
            margin-bottom: 12px;
        }

        .action-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .action-description {
            font-size: 0.8em;
            color: var(--text-secondary);
        }

        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 350px), 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .progress-chart {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
        }

        .strength-meter {
            margin-bottom: 20px;
        }

        .strength-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .strength-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-3), var(--accent-1));
            transition: width 0.5s ease-out;
        }

        .session-tracker {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .timer-display {
            background: var(--bg-tertiary);
            border: 2px solid var(--accent-1);
            border-radius: 12px;
            padding: 16px 24px;
            text-align: center;
            font-size: 2em;
            font-weight: 700;
            color: var(--accent-1);
            margin-bottom: 16px;
            font-family: 'Space Mono', monospace;
        }

        .timer-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            background: var(--accent-1);
            color: var(--bg-primary);
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.85em;
        }

        .btn:hover {
            background: var(--accent-2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-1);
        }

        .achievements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 140px), 1fr));
            gap: 12px;
            margin-bottom: 30px;
        }

        .achievement-badge {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s;
        }

        .achievement-badge.unlocked {
            border-color: var(--accent-1);
            background: rgba(0, 255, 136, 0.05);
        }

        .achievement-badge.locked {
            opacity: 0.4;
        }

        .achievement-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
        }

        .achievement-name {
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .achievement-desc {
            font-size: 0.7em;
            color: var(--text-secondary);
        }

        .simulation-container {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin: 30px 0;
        }

        .canvas-wrapper {
            background: #000;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
        }

        canvas {
            display: block;
            width: 100%;
            height: 400px;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 200px), 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .slider-group {
            width: 100%;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--bg-secondary);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-1);
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent-1);
            cursor: pointer;
            border: none;
        }

        .week-heatmap {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 16px;
        }

        .day-cell {
            aspect-ratio: 1;
            background: var(--bg-tertiary);
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .day-cell.active {
            background: rgba(0, 255, 136, 0.2);
            border-color: var(--accent-1);
        }

        .day-cell.today {
            border-color: var(--accent-2);
            border-width: 2px;
        }

        .day-label {
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .day-minutes {
            color: var(--accent-1);
            font-weight: 600;
        }

        .formula-display {
            background: var(--bg-tertiary);
            border-left: 3px solid var(--accent-1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-family: 'Space Mono', monospace;
            overflow-x: auto;
        }

        .module-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            cursor: pointer;
            user-select: none;
        }

        .module-title {
            font-size: 1.2em;
            font-weight: 700;
            color: var(--accent-1);
        }

        .module-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .module-content.expanded {
            max-height: 5000px;
        }

        .subtopic {
            margin: 16px 0;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .subtopic h4 {
            color: var(--accent-2);
            margin-bottom: 8px;
        }

        .subtopic ul {
            margin-left: 20px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .sim-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 400px), 1fr));
            gap: 24px;
        }

        .vector-display {
            position: absolute;
            color: var(--accent-2);
            font-size: 0.75em;
            font-weight: 600;
            pointer-events: none;
        }

        .info-panel {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--text-secondary);
        }

        .info-value {
            color: var(--accent-1);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .logo { font-size: 1.8em; }
            .practice-container { padding: 20px; }
            .session-tracker { padding: 20px; }
        }

        .hidden { display: none !important; }
        .mb-20 { margin-bottom: 20px; }
        .mb-30 { margin-bottom: 30px; }

        /* Animation for derivative visualization */
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .tangent-line {
            animation: pulse 2s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    
    <div class="container">
        <header>
            <h1 class="logo">PHYSICS MASTERY</h1>
            <p class="tagline">Complete HSC Year 11 & 12 Syllabus</p>
        </header>

        <div class="tab-nav">
            <button class="tab-btn active" data-tab="dashboard">üìä Dashboard</button>
            <button class="tab-btn" data-tab="syllabus">üìö Syllabus</button>
            <button class="tab-btn" data-tab="simulate">‚ö° Simulations</button>
            <button class="tab-btn" data-tab="exam">üéØ Exam Prep</button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="content-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Current Streak</div>
                    <div class="stat-value" id="streak-value">0</div>
                    <div class="stat-change">üî• Days</div>
                    <div class="stat-trend" id="streak-trend">Best: 0 days</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Problems Solved</div>
                    <div class="stat-value" id="solved-value">0</div>
                    <div class="stat-change" id="solved-change">+0 this week</div>
                    <div class="stat-trend" id="accuracy-display">0% accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Study Time Today</div>
                    <div class="stat-value" id="today-time-value">0h 0m</div>
                    <div class="stat-change" id="week-time-display">0h 0m this week</div>
                    <div class="stat-trend" id="avg-daily">Avg: 0m/day</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Mastery Level</div>
                    <div class="stat-value" id="mastery-value">0</div>
                    <div class="stat-change">Out of 100</div>
                    <div class="stat-trend" id="mastery-trend">+0 this week</div>
                </div>
            </div>

            <h2 class="mb-20">üéØ Performance Insights</h2>
            <div class="insights-grid" id="insights-container"></div>

            <h2 class="mb-20">üìÖ This Week's Activity</h2>
            <div class="session-tracker">
                <div class="week-heatmap" id="week-heatmap"></div>
            </div>

            <h2 class="mb-20">‚ö° Quick Actions</h2>
            <div class="quick-actions">
                <div class="action-card" onclick="switchTab('syllabus')">
                    <div class="action-icon">üìö</div>
                    <div class="action-title">Study Content</div>
                    <div class="action-description">Full syllabus</div>
                </div>
                <div class="action-card" onclick="switchTab('simulate')">
                    <div class="action-icon">‚ö°</div>
                    <div class="action-title">Simulations</div>
                    <div class="action-description">Interactive demos</div>
                </div>
                <div class="action-card" onclick="startTimer()">
                    <div class="action-icon">‚è±Ô∏è</div>
                    <div class="action-title">Start Timer</div>
                    <div class="action-description">Track study time</div>
                </div>
                <div class="action-card" onclick="switchTab('exam')">
                    <div class="action-icon">üéØ</div>
                    <div class="action-title">Exam Tips</div>
                    <div class="action-description">Strategy guide</div>
                </div>
            </div>

            <h2 class="mb-20">‚è±Ô∏è Study Session</h2>
            <div class="session-tracker">
                <div class="timer-display" id="timer-display">00:00:00</div>
                <div class="timer-controls">
                    <button class="btn" id="timer-btn-start" onclick="startTimer()">Start</button>
                    <button class="btn btn-secondary" onclick="pauseTimer()">Pause</button>
                    <button class="btn btn-secondary" onclick="resetTimer()">Reset</button>
                </div>
            </div>

            <h2 class="mb-20">üìà Topic Progress</h2>
            <div class="progress-overview">
                <div class="progress-chart">
                    <h3 class="mb-20">Mastery by Topic</h3>
                    <div id="topic-progress-container"></div>
                </div>
                <div class="progress-chart">
                    <h3 class="mb-20">Focus Areas</h3>
                    <div id="weak-areas-container"></div>
                </div>
            </div>

            <h2 class="mb-20">üî¨ All Topics</h2>
            <div class="topic-grid" id="topics-grid"></div>

            <h2 class="mb-20">üèÜ Achievements</h2>
            <div class="achievements" id="achievements-container"></div>
        </div>

        <!-- Syllabus Content -->
        <div id="syllabus" class="content-section">
            <h2 class="mb-30">Complete HSC Physics Syllabus</h2>
            
            <h2 style="color: var(--accent-2); margin-bottom: 20px;">üìò Year 11 Content</h2>
            
            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 1: Kinematics</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Motion in a Straight Line</h4>
                        <ul>
                            <li>Scalar vs vector quantities</li>
                            <li>Distance, displacement, speed, velocity</li>
                            <li>Average vs instantaneous values</li>
                            <li>Position-time and velocity-time graphs</li>
                        </ul>
                        <div class="formula-display">
                            $$v_{avg} = \frac{\Delta x}{\Delta t} \quad a_{avg} = \frac{\Delta v}{\Delta t}$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Uniformly Accelerated Motion (SUVAT)</h4>
                        <ul>
                            <li>The five equations of motion</li>
                            <li>Free fall and gravity</li>
                            <li>Graphical analysis</li>
                        </ul>
                        <div class="formula-display">
                            $$v = u + at$$
                            $$s = ut + \frac{1}{2}at^2$$
                            $$v^2 = u^2 + 2as$$
                            $$s = \frac{1}{2}(u+v)t$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Projectile Motion</h4>
                        <ul>
                            <li>Horizontal and vertical components</li>
                            <li>Independence of perpendicular motions</li>
                            <li>Range, maximum height, time of flight</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 2: Dynamics</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Forces and Newton's Laws</h4>
                        <ul>
                            <li>Newton's First Law (inertia)</li>
                            <li>Newton's Second Law: F = ma</li>
                            <li>Newton's Third Law (action-reaction)</li>
                            <li>Free body diagrams</li>
                        </ul>
                        <div class="formula-display">
                            $$\vec{F}_{net} = m\vec{a} \quad F_f = \mu N \quad W = mg$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Momentum and Impulse</h4>
                        <ul>
                            <li>Linear momentum: p = mv</li>
                            <li>Impulse-momentum theorem</li>
                            <li>Conservation of momentum</li>
                            <li>Collisions (elastic and inelastic)</li>
                        </ul>
                        <div class="formula-display">
                            $$\vec{p} = m\vec{v} \quad \vec{J} = \Delta\vec{p} = \vec{F}\Delta t$$
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 3: Waves and Thermodynamics</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Wave Properties</h4>
                        <ul>
                            <li>Transverse vs longitudinal waves</li>
                            <li>Amplitude, wavelength, frequency, period</li>
                            <li>Wave equation: v = fŒª</li>
                            <li>Reflection, refraction, diffraction</li>
                        </ul>
                        <div class="formula-display">
                            $$v = f\lambda \quad T = \frac{1}{f}$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Thermodynamics</h4>
                        <ul>
                            <li>Temperature and thermal equilibrium</li>
                            <li>Heat transfer methods</li>
                            <li>Specific heat capacity</li>
                            <li>Latent heat</li>
                        </ul>
                        <div class="formula-display">
                            $$Q = mc\Delta T \quad Q = mL$$
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 4: Electricity and Magnetism</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Electrostatics</h4>
                        <ul>
                            <li>Coulomb's Law</li>
                            <li>Electric fields</li>
                            <li>Electric potential</li>
                        </ul>
                        <div class="formula-display">
                            $$F = k\frac{q_1q_2}{r^2} \quad E = \frac{F}{q}$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Electric Circuits</h4>
                        <ul>
                            <li>Current, voltage, resistance</li>
                            <li>Ohm's Law</li>
                            <li>Series and parallel circuits</li>
                            <li>Power in circuits</li>
                        </ul>
                        <div class="formula-display">
                            $$V = IR \quad P = VI = I^2R = \frac{V^2}{R}$$
                        </div>
                    </div>
                </div>
            </div>

            <h2 style="color: var(--accent-4); margin: 40px 0 20px 0;">üìó Year 12 Content</h2>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 5: Advanced Mechanics</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Circular Motion</h4>
                        <ul>
                            <li>Uniform circular motion</li>
                            <li>Centripetal acceleration and force</li>
                            <li>Angular velocity</li>
                        </ul>
                        <div class="formula-display">
                            $$a_c = \frac{v^2}{r} = \omega^2r \quad F_c = \frac{mv^2}{r}$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Gravitational Fields</h4>
                        <ul>
                            <li>Newton's Law of Gravitation</li>
                            <li>Gravitational field strength</li>
                            <li>Orbital motion</li>
                            <li>Escape velocity</li>
                        </ul>
                        <div class="formula-display">
                            $$F = G\frac{m_1m_2}{r^2} \quad g = \frac{GM}{r^2}$$
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 6: Electromagnetism</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Magnetic Fields</h4>
                        <ul>
                            <li>Force on conductors: F = BIL</li>
                            <li>Force on moving charges: F = qvB</li>
                            <li>Right-hand rules</li>
                        </ul>
                        <div class="formula-display">
                            $$F = BIL\sin\theta \quad F = qvB\sin\theta$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Electromagnetic Induction</h4>
                        <ul>
                            <li>Faraday's Law</li>
                            <li>Lenz's Law</li>
                            <li>Transformers and generators</li>
                        </ul>
                        <div class="formula-display">
                            $$\mathcal{E} = -N\frac{\Delta\Phi}{\Delta t} \quad \mathcal{E} = BLv$$
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 7: The Nature of Light</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Wave Model</h4>
                        <ul>
                            <li>EM spectrum</li>
                            <li>Refraction and Snell's Law</li>
                        </ul>
                        <div class="formula-display">
                            $$n_1\sin\theta_1 = n_2\sin\theta_2$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Particle Model</h4>
                        <ul>
                            <li>Photoelectric effect</li>
                            <li>Photon energy</li>
                            <li>Wave-particle duality</li>
                        </ul>
                        <div class="formula-display">
                            $$E = hf \quad E_K = hf - \phi \quad \lambda = \frac{h}{p}$$
                        </div>
                    </div>
                </div>
            </div>

            <div class="module-section">
                <div class="module-header" onclick="toggleModule(this)">
                    <div class="module-title">Module 8: From Universe to Atom</div>
                    <div style="color: var(--accent-1);">‚ñº</div>
                </div>
                <div class="module-content">
                    <div class="subtopic">
                        <h4>Special Relativity</h4>
                        <ul>
                            <li>Time dilation</li>
                            <li>Length contraction</li>
                            <li>E = mc¬≤</li>
                        </ul>
                        <div class="formula-display">
                            $$\Delta t = \frac{\Delta t_0}{\sqrt{1-v^2/c^2}} \quad E = mc^2$$
                        </div>
                    </div>
                    <div class="subtopic">
                        <h4>Nuclear Physics</h4>
                        <ul>
                            <li>Radioactive decay</li>
                            <li>Half-life</li>
                            <li>Fission and fusion</li>
                        </ul>
                        <div class="formula-display">
                            $$N = N_0e^{-\lambda t} \quad t_{1/2} = \frac{\ln 2}{\lambda}$$
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Simulations -->
        <div id="simulate" class="content-section">
            <h2 class="mb-30">Interactive Physics Simulations</h2>
            
            <!-- Projectile Motion -->
            <div class="simulation-container">
                <h3 class="mb-20">üöÄ Projectile Motion</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    See how velocity and angle affect trajectory in real-time. Velocity vectors shown at launch.
                </p>
                
                <div class="canvas-wrapper">
                    <canvas id="projectile-canvas" width="800" height="400"></canvas>
                </div>

                <div class="controls">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Initial Velocity</span>
                            <span id="velocity-display">20 m/s</span>
                        </div>
                        <input type="range" id="velocity-slider" min="5" max="50" value="20" step="1">
                    </div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Launch Angle</span>
                            <span id="angle-display">45¬∞</span>
                        </div>
                        <input type="range" id="angle-slider" min="0" max="90" value="45" step="1">
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-row">
                        <span class="info-label">Max Height</span>
                        <span class="info-value" id="sim-height">0 m</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Time of Flight</span>
                        <span class="info-value" id="sim-time">0 s</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Range</span>
                        <span class="info-value" id="sim-range">0 m</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Horizontal Component (v‚Çì)</span>
                        <span class="info-value" id="sim-vx">0 m/s</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Vertical Component (v·µß)</span>
                        <span class="info-value" id="sim-vy">0 m/s</span>
                    </div>
                </div>
            </div>

            <!-- Derivatives Visualizer -->
            <div class="simulation-container">
                <h3 class="mb-20">üìà Understanding Derivatives</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    See how the derivative represents the slope (rate of change) at any point. Move the slider to change the point!
                </p>
                
                <div class="canvas-wrapper">
                    <canvas id="derivative-canvas" width="800" height="400"></canvas>
                </div>

                <div class="controls">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Position on Curve</span>
                            <span id="deriv-pos-display">x = 5</span>
                        </div>
                        <input type="range" id="deriv-slider" min="0" max="100" value="50" step="1">
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-row">
                        <span class="info-label">Position: x(t)</span>
                        <span class="info-value" id="deriv-x">0 m</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Velocity: dx/dt</span>
                        <span class="info-value" id="deriv-v">0 m/s</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Acceleration: d¬≤x/dt¬≤</span>
                        <span class="info-value" id="deriv-a">0 m/s¬≤</span>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(0, 255, 136, 0.1); border-radius: 8px;">
                    <h4 style="color: var(--accent-1); margin-bottom: 8px;">üí° Key Concept</h4>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        The <strong>tangent line</strong> (green) shows the instantaneous rate of change. 
                        Its slope is the <strong>derivative</strong>. In physics: position ‚Üí velocity ‚Üí acceleration!
                    </p>
                </div>
            </div>

            <!-- Wave Interference -->
            <div class="simulation-container">
                <h3 class="mb-20">üåä Wave Interference</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    See constructive and destructive interference in action. Adjust frequency and amplitude.
                </p>
                
                <div class="canvas-wrapper">
                    <canvas id="wave-canvas" width="800" height="400"></canvas>
                </div>

                <div class="controls">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Frequency</span>
                            <span id="freq-display">2 Hz</span>
                        </div>
                        <input type="range" id="freq-slider" min="1" max="5" value="2" step="0.5">
                    </div>
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Phase Shift</span>
                            <span id="phase-display">0¬∞</span>
                        </div>
                        <input type="range" id="phase-slider" min="0" max="360" value="0" step="10">
                    </div>
                </div>

                <div class="info-panel">
                    <div class="info-row">
                        <span class="info-label">Interference Type</span>
                        <span class="info-value" id="interference-type">Constructive</span>
                    </div>
                </div>
            </div>

            <!-- Electric Field -->
            <div class="simulation-container">
                <h3 class="mb-20">‚ö° Electric Field Lines</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Visualize electric fields around charges. Adjust charge magnitude and position.
                </p>
                
                <div class="canvas-wrapper">
                    <canvas id="efield-canvas" width="800" height="400"></canvas>
                </div>

                <div class="controls">
                    <div class="slider-group">
                        <div class="slider-label">
                            <span>Charge Magnitude</span>
                            <span id="charge-display">+5 ŒºC</span>
                        </div>
                        <input type="range" id="charge-slider" min="-10" max="10" value="5" step="1">
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(0, 204, 255, 0.1); border-radius: 8px;">
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        <strong style="color: var(--accent-2);">Field lines</strong> point away from positive charges 
                        and toward negative charges. Line density shows field strength.
                    </p>
                </div>
            </div>
        </div>

        <!-- Exam Prep -->
        <div id="exam" class="content-section">
            <h2 class="mb-30">üéØ Exam Strategy & Tips</h2>
            
            <div class="practice-container">
                <h3 class="mb-20">How to Maximize Your Marks</h3>
                <div style="color: var(--text-secondary); line-height: 1.8;">
                    <p style="margin-bottom: 16px;"><strong>Multiple Choice (20 marks, ~30 mins):</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 24px;">
                        <li>Read every word - watch for "NOT", "EXCEPT"</li>
                        <li>Eliminate wrong answers first</li>
                        <li>Check units and magnitudes</li>
                        <li>Max 1.5 mins per question</li>
                    </ul>

                    <p style="margin-bottom: 16px;"><strong>Short Answer (40-60 marks, ~1.5 hours):</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 24px;">
                        <li>ALWAYS show working</li>
                        <li>Formula ‚Üí Substitute ‚Üí Calculate ‚Üí Answer with units</li>
                        <li>Draw diagrams when asked</li>
                        <li>For "explain" - use physics terminology</li>
                    </ul>

                    <p style="margin-bottom: 16px;"><strong>Extended Response (20-30 marks, ~45 mins):</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>Plan before writing</li>
                        <li>Structure: Intro ‚Üí Main ‚Üí Conclusion</li>
                        <li>Use scientific terminology</li>
                        <li>Reference real-world applications</li>
                    </ul>
                </div>
            </div>

            <div class="practice-container">
                <h3 class="mb-20">‚ö†Ô∏è Common Mistakes</h3>
                <ul style="margin-left: 20px; color: var(--text-secondary); line-height: 1.8;">
                    <li><strong>Unit conversions:</strong> Always convert BEFORE calculating</li>
                    <li><strong>Sign errors:</strong> Gravity is -9.8 m/s¬≤ for upward motion</li>
                    <li><strong>Components:</strong> Split vectors into x and y first</li>
                    <li><strong>Missing units:</strong> You WILL lose marks</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // State management
        let state = {
            stats: {
                streak: 0,
                bestStreak: 0,
                solved: 0,
                attempted: 0,
                totalStudyTime: 0,
                weekStudyTime: [0, 0, 0, 0, 0, 0, 0],
                lastStudyDate: null,
                weekStartDate: null,
                masteryByTopic: {
                    kinematics: 0, dynamics: 0, waves: 0, electricity: 0,
                    mechanics: 0, electromagnetism: 0, light: 0, quantum: 0
                },
                achievements: {
                    firstStreak: false,
                    perfectScore: false,
                    speedDemon: false,
                    experimenter: 0
                }
            },
            timer: {
                seconds: 0,
                isRunning: false,
                interval: null,
                todaySeconds: 0
            },
            simulation: {
                velocity: 20,
                angle: 45,
                derivPos: 5,
                frequency: 2,
                phase: 0,
                charge: 5
            }
        };

        const topics = [
            { id: 'kinematics', icon: 'üöÄ', title: 'Kinematics', desc: 'Motion & projectiles', year: 11 },
            { id: 'dynamics', icon: '‚öñÔ∏è', title: 'Dynamics', desc: 'Forces & momentum', year: 11 },
            { id: 'waves', icon: 'üåä', title: 'Waves', desc: 'Sound & thermodynamics', year: 11 },
            { id: 'electricity', icon: 'üîå', title: 'Electricity', desc: 'Circuits & fields', year: 11 },
            { id: 'mechanics', icon: 'üîÑ', title: 'Advanced Mechanics', desc: 'Circular & gravity', year: 12 },
            { id: 'electromagnetism', icon: 'üß≤', title: 'Electromagnetism', desc: 'Induction & motors', year: 12 },
            { id: 'light', icon: 'üí°', title: 'Nature of Light', desc: 'Wave-particle duality', year: 12 },
            { id: 'quantum', icon: '‚öõÔ∏è', title: 'Modern Physics', desc: 'Relativity & nuclear', year: 12 }
        ];

        function init() {
            loadState();
            updateDashboard();
            renderTopics();
            renderAchievements();
            renderWeekHeatmap();
            updateInsights();
            setInterval(saveState, 30000);
            
            setupSimulations();
        }

        function loadState() {
            const saved = localStorage.getItem('physicsStats');
            if (saved) {
                const loaded = JSON.parse(saved);
                state.stats = { ...state.stats, ...loaded };
                updateStreak();
            }
        }

        function saveState() {
            localStorage.setItem('physicsStats', JSON.stringify(state.stats));
        }

        function updateStreak() {
            const today = new Date().toDateString();
            const lastStudy = state.stats.lastStudyDate;
            if (!lastStudy) return;
            
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            
            if (lastStudy !== yesterday.toDateString() && lastStudy !== today) {
                state.stats.streak = 0;
            }
        }

        function recordStudyActivity() {
            const today = new Date().toDateString();
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            
            if (state.stats.lastStudyDate === yesterday.toDateString()) {
                state.stats.streak++;
            } else if (state.stats.lastStudyDate !== today) {
                state.stats.streak = 1;
            }
            
            state.stats.lastStudyDate = today;
            if (state.stats.streak > state.stats.bestStreak) {
                state.stats.bestStreak = state.stats.streak;
            }
            saveState();
        }

        function startTimer() {
            if (!state.timer.isRunning) {
                state.timer.isRunning = true;
                recordStudyActivity();
                
                state.timer.interval = setInterval(() => {
                    state.timer.seconds++;
                    state.timer.todaySeconds++;
                    updateTimerDisplay();
                    
                    if (state.timer.seconds % 60 === 0) {
                        const dayIndex = new Date().getDay();
                        state.stats.weekStudyTime[dayIndex]++;
                        state.stats.totalStudyTime += 60;
                        saveState();
                        updateDashboard();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            state.timer.isRunning = false;
            if (state.timer.interval) clearInterval(state.timer.interval);
        }

        function resetTimer() {
            pauseTimer();
            state.timer.seconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const h = Math.floor(state.timer.seconds / 3600);
            const m = Math.floor((state.timer.seconds % 3600) / 60);
            const s = state.timer.seconds % 60;
            document.getElementById('timer-display').textContent = 
                `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        function updateDashboard() {
            document.getElementById('streak-value').textContent = state.stats.streak;
            document.getElementById('streak-trend').textContent = `Best: ${state.stats.bestStreak} days`;
            document.getElementById('solved-value').textContent = state.stats.solved;
            
            const weekSolved = Math.min(state.stats.solved, 15);
            document.getElementById('solved-change').textContent = `+${weekSolved} this week`;
            
            const accuracy = state.stats.attempted > 0 
                ? Math.round((state.stats.solved / state.stats.attempted) * 100) : 0;
            document.getElementById('accuracy-display').textContent = `${accuracy}% accuracy`;
            
            const todayMins = Math.floor(state.timer.todaySeconds / 60) + 
                (state.stats.weekStudyTime[new Date().getDay()] || 0);
            const todayHours = Math.floor(todayMins / 60);
            const todayRemainingMins = todayMins % 60;
            document.getElementById('today-time-value').textContent = `${todayHours}h ${todayRemainingMins}m`;
            
            const weekTotal = state.stats.weekStudyTime.reduce((a, b) => a + b, 0);
            const weekHours = Math.floor(weekTotal / 60);
            const weekMins = weekTotal % 60;
            document.getElementById('week-time-display').textContent = `${weekHours}h ${weekMins}m this week`;
            
            const avgDaily = Math.floor(weekTotal / 7);
            document.getElementById('avg-daily').textContent = `Avg: ${avgDaily}m/day`;
            
            const avgMastery = Math.round(
                Object.values(state.stats.masteryByTopic).reduce((a, b) => a + b, 0) / 8
            );
            document.getElementById('mastery-value').textContent = avgMastery;
            document.getElementById('mastery-trend').textContent = `+${Math.min(avgMastery, 12)} this week`;
            
            updateTopicProgress();
        }

        function updateTopicProgress() {
            const container = document.getElementById('topic-progress-container');
            if (!container) return;
            
            container.innerHTML = topics.map(topic => {
                const mastery = state.stats.masteryByTopic[topic.id] || 0;
                return `
                    <div class="strength-meter">
                        <div class="strength-label">
                            <span>${topic.title}</span>
                            <span>${mastery}%</span>
                        </div>
                        <div class="strength-bar">
                            <div class="strength-fill" style="width: ${mastery}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
            
            const weakContainer = document.getElementById('weak-areas-container');
            if (!weakContainer) return;
            
            const sorted = [...topics].sort((a, b) => 
                (state.stats.masteryByTopic[a.id] || 0) - (state.stats.masteryByTopic[b.id] || 0)
            );
            
            weakContainer.innerHTML = sorted.slice(0, 3).map(topic => {
                const mastery = state.stats.masteryByTopic[topic.id] || 0;
                const icon = mastery < 50 ? 'üî¥' : 'üü°';
                return `<p style="margin-bottom: 12px;">${icon} <strong>${topic.title}</strong> - ${mastery}%</p>`;
            }).join('') + `
                <p style="margin-top: 24px; padding: 12px; background: rgba(255, 0, 102, 0.1); border-radius: 8px;">
                    üí° Focus on <strong>${sorted[0].title}</strong> for maximum impact
                </p>
            `;
        }

        function renderTopics() {
            const container = document.getElementById('topics-grid');
            if (!container) return;
            
            container.innerHTML = topics.map(topic => {
                const mastery = state.stats.masteryByTopic[topic.id] || 0;
                return `
                    <div class="topic-card" onclick="switchTab('syllabus')">
                        <div class="topic-icon">${topic.icon}</div>
                        <div class="topic-title">${topic.title}</div>
                        <div class="topic-description">${topic.desc}</div>
                        <div class="topic-progress">
                            <div class="topic-progress-fill" style="width: ${mastery}%"></div>
                        </div>
                        <div class="topic-stats">
                            <span>Year ${topic.year}</span>
                            <span>${mastery}% mastery</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderAchievements() {
            const container = document.getElementById('achievements-container');
            if (!container) return;
            
            const achievements = [
                { icon: 'üî•', name: 'First Streak', desc: '3 days', 
                  unlocked: state.stats.streak >= 3 },
                { icon: 'üíØ', name: 'Perfect Score', desc: 'All correct', 
                  unlocked: state.stats.achievements.perfectScore },
                { icon: '‚ö°', name: 'Speed Demon', desc: '10 in 1 hour', 
                  unlocked: state.stats.achievements.speedDemon },
                { icon: 'üéì', name: 'Topic Master', desc: '100% topic', 
                  unlocked: Object.values(state.stats.masteryByTopic).some(m => m >= 100) },
                { icon: 'üî¨', name: 'Experimenter', desc: '50 sims', 
                  unlocked: state.stats.achievements.experimenter >= 50 },
                { icon: 'üëë', name: 'Physics King', desc: '500 problems', 
                  unlocked: state.stats.solved >= 500 }
            ];
            
            container.innerHTML = achievements.map(a => `
                <div class="achievement-badge ${a.unlocked ? 'unlocked' : 'locked'}">
                    <div class="achievement-icon">${a.icon}</div>
                    <div class="achievement-name">${a.name}</div>
                    <div class="achievement-desc">${a.desc}</div>
                </div>
            `).join('');
        }

        function renderWeekHeatmap() {
            const container = document.getElementById('week-heatmap');
            if (!container) return;
            
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const today = new Date().getDay();
            
            container.innerHTML = days.map((day, i) => {
                const minutes = state.stats.weekStudyTime[i] || 0;
                return `
                    <div class="day-cell ${minutes > 0 ? 'active' : ''} ${i === today ? 'today' : ''}">
                        <div class="day-label">${day}</div>
                        <div class="day-minutes">${minutes}m</div>
                    </div>
                `;
            }).join('');
        }

        function updateInsights() {
            const container = document.getElementById('insights-container');
            if (!container) return;
            
            const insights = [];
            
            if (state.stats.streak >= 3) {
                insights.push({
                    icon: 'üî•',
                    title: 'Hot Streak!',
                    text: `${state.stats.streak} days in a row. Keep going!`
                });
            }
            
            const weekTotal = state.stats.weekStudyTime.reduce((a, b) => a + b, 0);
            if (weekTotal >= 120) {
                insights.push({
                    icon: '‚≠ê',
                    title: 'Strong Week',
                    text: `${Math.floor(weekTotal / 60)}h ${weekTotal % 60}m this week!`
                });
            }
            
            const sorted = [...topics].sort((a, b) => 
                (state.stats.masteryByTopic[a.id] || 0) - (state.stats.masteryByTopic[b.id] || 0)
            );
            const weakest = sorted[0];
            const weakMastery = state.stats.masteryByTopic[weakest.id] || 0;
            
            if (weakMastery < 50) {
                insights.push({
                    icon: 'üéØ',
                    title: 'Focus Area',
                    text: `${weakest.title} needs work (${weakMastery}%)`
                });
            }
            
            if (insights.length === 0) {
                insights.push({
                    icon: 'üöÄ',
                    title: 'Get Started',
                    text: 'Start practicing to see your progress!'
                });
            }
            
            container.innerHTML = insights.map(i => `
                <div class="insight-card">
                    <div class="insight-icon">${i.icon}</div>
                    <div class="insight-title">${i.title}</div>
                    <div class="insight-text">${i.text}</div>
                </div>
            `).join('');
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            const btn = document.querySelector(`[data-tab="${tab}"]`);
            if (btn) btn.classList.add('active');
            
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            const section = document.getElementById(tab);
            if (section) section.classList.add('active');
        }

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => switchTab(btn.dataset.tab));
        });

        function toggleModule(header) {
            const content = header.nextElementSibling;
            const arrow = header.querySelector('div:last-child');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                arrow.textContent = '‚ñº';
            } else {
                content.classList.add('expanded');
                arrow.textContent = '‚ñ≤';
            }
        }

        // === SIMULATIONS ===
        
        function setupSimulations() {
            setupProjectile();
            setupDerivative();
            setupWaves();
            setupElectricField();
        }

        // Projectile Motion
        function setupProjectile() {
            const canvas = document.getElementById('projectile-canvas');
            if (!canvas) return;
            
            const velocitySlider = document.getElementById('velocity-slider');
            const angleSlider = document.getElementById('angle-slider');
            
            function update() {
                drawProjectilePath(state.simulation.velocity, state.simulation.angle);
            }
            
            velocitySlider.addEventListener('input', (e) => {
                state.simulation.velocity = parseInt(e.target.value);
                document.getElementById('velocity-display').textContent = e.target.value + ' m/s';
                update();
            });
            
            angleSlider.addEventListener('input', (e) => {
                state.simulation.angle = parseInt(e.target.value);
                document.getElementById('angle-display').textContent = e.target.value + '¬∞';
                update();
            });
            
            update();
        }

        function drawProjectilePath(v0, angle) {
            const canvas = document.getElementById('projectile-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            const angleRad = angle * Math.PI / 180;
            const vx = v0 * Math.cos(angleRad);
            const vy = v0 * Math.sin(angleRad);
            const g = 10;
            
            const timeOfFlight = 2 * vy / g;
            const range = vx * timeOfFlight;
            const maxHeight = (vy * vy) / (2 * g);
            
            const scale = Math.min(w / range, h / (maxHeight * 2)) * 0.7;
            const offsetX = 60;
            const offsetY = h - 60;
            
            // Ground
            ctx.strokeStyle = 'rgba(0, 255, 136, 0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, offsetY);
            ctx.lineTo(w, offsetY);
            ctx.stroke();
            
            // Trajectory
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let t = 0; t <= timeOfFlight; t += 0.01) {
                const x = vx * t;
                const y = vy * t - 0.5 * g * t * t;
                const canvasX = offsetX + x * scale;
                const canvasY = offsetY - y * scale;
                
                if (t === 0) ctx.moveTo(canvasX, canvasY);
                else ctx.lineTo(canvasX, canvasY);
            }
            ctx.stroke();
            
            // Launch point
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.arc(offsetX, offsetY, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // Velocity vectors at launch
            const vectorScale = 3;
            
            // Horizontal component (blue)
            ctx.strokeStyle = '#00ccff';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX + vx * vectorScale, offsetY);
            ctx.stroke();
            
            // Arrow
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.moveTo(offsetX + vx * vectorScale, offsetY);
            ctx.lineTo(offsetX + vx * vectorScale - 8, offsetY - 4);
            ctx.lineTo(offsetX + vx * vectorScale - 8, offsetY + 4);
            ctx.fill();
            
            // Vertical component (pink)
            ctx.strokeStyle = '#ff0066';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX, offsetY - vy * vectorScale);
            ctx.stroke();
            
            // Arrow
            ctx.fillStyle = '#ff0066';
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY - vy * vectorScale);
            ctx.lineTo(offsetX - 4, offsetY - vy * vectorScale + 8);
            ctx.lineTo(offsetX + 4, offsetY - vy * vectorScale + 8);
            ctx.fill();
            
            // Labels
            ctx.fillStyle = '#00ccff';
            ctx.font = '12px JetBrains Mono';
            ctx.fillText(`v‚Çì = ${vx.toFixed(1)} m/s`, offsetX + vx * vectorScale / 2, offsetY + 20);
            
            ctx.fillStyle = '#ff0066';
            ctx.fillText(`v·µß = ${vy.toFixed(1)} m/s`, offsetX + 15, offsetY - vy * vectorScale / 2);
            
            // Landing point
            ctx.fillStyle = '#ff0066';
            ctx.beginPath();
            ctx.arc(offsetX + range * scale, offsetY, 8, 0, Math.PI * 2);
            ctx.fill();
            
            // Update data
            document.getElementById('sim-height').textContent = maxHeight.toFixed(2) + ' m';
            document.getElementById('sim-time').textContent = timeOfFlight.toFixed(2) + ' s';
            document.getElementById('sim-range').textContent = range.toFixed(2) + ' m';
            document.getElementById('sim-vx').textContent = vx.toFixed(2) + ' m/s';
            document.getElementById('sim-vy').textContent = vy.toFixed(2) + ' m/s';
            
            state.stats.achievements.experimenter++;
            saveState();
        }

        // Derivative Visualizer
        function setupDerivative() {
            const canvas = document.getElementById('derivative-canvas');
            if (!canvas) return;
            
            const slider = document.getElementById('deriv-slider');
            
            function update() {
                const t = state.simulation.derivPos;
                drawDerivative(t);
            }
            
            slider.addEventListener('input', (e) => {
                state.simulation.derivPos = parseInt(e.target.value) / 10;
                document.getElementById('deriv-pos-display').textContent = 
                    `x = ${state.simulation.derivPos.toFixed(1)}`;
                update();
            });
            
            update();
        }

        function drawDerivative(t) {
            const canvas = document.getElementById('derivative-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            // Position function: x(t) = 0.5t¬≤ - 2t + 10 (parabola)
            const x = (time) => 0.5 * time * time - 2 * time + 10;
            const v = (time) => time - 2; // velocity (first derivative)
            const a = () => 1; // acceleration (second derivative - constant)
            
            // Axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(50, h - 50);
            ctx.lineTo(w - 50, h - 50);
            ctx.moveTo(50, 50);
            ctx.lineTo(50, h - 50);
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#a0a0a0';
            ctx.font = '12px JetBrains Mono';
            ctx.fillText('time (s)', w - 80, h - 30);
            ctx.fillText('position (m)', 55, 40);
            
            // Draw position curve
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const scale = 40;
            for (let time = 0; time <= 10; time += 0.1) {
                const canvasX = 50 + time * scale;
                const canvasY = h - 50 - x(time) * 10;
                
                if (time === 0) ctx.moveTo(canvasX, canvasY);
                else ctx.lineTo(canvasX, canvasY);
            }
            ctx.stroke();
            
            // Current point
            const px = 50 + t * scale;
            const py = h - 50 - x(t) * 10;
            
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.arc(px, py, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // Tangent line (derivative)
            const slope = v(t);
            const b = x(t) - slope * t;
            
            ctx.strokeStyle = '#00ccff';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            
            const t1 = Math.max(0, t - 2);
            const t2 = Math.min(10, t + 2);
            const x1 = 50 + t1 * scale;
            const y1 = h - 50 - (slope * t1 + b) * 10;
            const x2 = 50 + t2 * scale;
            const y2 = h - 50 - (slope * t2 + b) * 10;
            
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Update info
            document.getElementById('deriv-x').textContent = x(t).toFixed(2) + ' m';
            document.getElementById('deriv-v').textContent = v(t).toFixed(2) + ' m/s';
            document.getElementById('deriv-a').textContent = a().toFixed(2) + ' m/s¬≤';
        }

        // Wave Interference
        function setupWaves() {
            const canvas = document.getElementById('wave-canvas');
            if (!canvas) return;
            
            const freqSlider = document.getElementById('freq-slider');
            const phaseSlider = document.getElementById('phase-slider');
            
            function update() {
                drawWaves();
            }
            
            freqSlider.addEventListener('input', (e) => {
                state.simulation.frequency = parseFloat(e.target.value);
                document.getElementById('freq-display').textContent = e.target.value + ' Hz';
                update();
            });
            
            phaseSlider.addEventListener('input', (e) => {
                state.simulation.phase = parseInt(e.target.value);
                document.getElementById('phase-display').textContent = e.target.value + '¬∞';
                update();
            });
            
            update();
        }

        function drawWaves() {
            const canvas = document.getElementById('wave-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            const freq = state.simulation.frequency;
            const phase = state.simulation.phase * Math.PI / 180;
            const amp = 50;
            
            // Wave 1
            ctx.strokeStyle = 'rgba(0, 204, 255, 0.6)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let x = 0; x < w; x += 2) {
                const y = h / 4 + amp * Math.sin(2 * Math.PI * freq * x / 100);
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Wave 2
            ctx.strokeStyle = 'rgba(255, 0, 102, 0.6)';
            ctx.beginPath();
            
            for (let x = 0; x < w; x += 2) {
                const y = h / 2 + amp * Math.sin(2 * Math.PI * freq * x / 100 + phase);
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Superposition
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let x = 0; x < w; x += 2) {
                const y1 = amp * Math.sin(2 * Math.PI * freq * x / 100);
                const y2 = amp * Math.sin(2 * Math.PI * freq * x / 100 + phase);
                const y = 3 * h / 4 + y1 + y2;
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#00ccff';
            ctx.font = '12px JetBrains Mono';
            ctx.fillText('Wave 1', 20, h / 4 - 60);
            
            ctx.fillStyle = '#ff0066';
            ctx.fillText('Wave 2', 20, h / 2 - 60);
            
            ctx.fillStyle = '#00ff88';
            ctx.fillText('Superposition', 20, 3 * h / 4 - 60);
            
            // Determine interference type
            const phaseDeg = state.simulation.phase;
            let type;
            if (phaseDeg < 45 || phaseDeg > 315) {
                type = 'Constructive';
            } else if (phaseDeg > 135 && phaseDeg < 225) {
                type = 'Destructive';
            } else {
                type = 'Partial';
            }
            
            document.getElementById('interference-type').textContent = type;
        }

        // Electric Field
        function setupElectricField() {
            const canvas = document.getElementById('efield-canvas');
            if (!canvas) return;
            
            const slider = document.getElementById('charge-slider');
            
            function update() {
                drawElectricField();
            }
            
            slider.addEventListener('input', (e) => {
                state.simulation.charge = parseInt(e.target.value);
                const sign = state.simulation.charge >= 0 ? '+' : '';
                document.getElementById('charge-display').textContent = 
                    `${sign}${e.target.value} ŒºC`;
                update();
            });
            
            update();
        }

        function drawElectricField() {
            const canvas = document.getElementById('efield-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);
            
            const cx = w / 2;
            const cy = h / 2;
            const charge = state.simulation.charge;
            
            // Draw field lines
            const numLines = 16;
            for (let i = 0; i < numLines; i++) {
                const angle = (2 * Math.PI * i) / numLines;
                
                ctx.strokeStyle = charge >= 0 ? 
                    'rgba(255, 0, 102, 0.6)' : 'rgba(0, 204, 255, 0.6)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                const startR = 30;
                const endR = 200;
                
                if (charge >= 0) {
                    // Outward
                    ctx.moveTo(cx + startR * Math.cos(angle), cy + startR * Math.sin(angle));
                    ctx.lineTo(cx + endR * Math.cos(angle), cy + endR * Math.sin(angle));
                } else {
                    // Inward
                    ctx.moveTo(cx + endR * Math.cos(angle), cy + endR * Math.sin(angle));
                    ctx.lineTo(cx + startR * Math.cos(angle), cy + startR * Math.sin(angle));
                }
                
                ctx.stroke();
                
                // Arrow
                const arrowR = charge >= 0 ? endR - 10 : startR + 10;
                const arrowX = cx + arrowR * Math.cos(angle);
                const arrowY = cy + arrowR * Math.sin(angle);
                
                ctx.fillStyle = charge >= 0 ? '#ff0066' : '#00ccff';
                ctx.beginPath();
                
                if (charge >= 0) {
                    const angle1 = angle + 2.8;
                    const angle2 = angle - 2.8;
                    ctx.moveTo(arrowX, arrowY);
                    ctx.lineTo(arrowX - 10 * Math.cos(angle1), arrowY - 10 * Math.sin(angle1));
                    ctx.lineTo(arrowX - 10 * Math.cos(angle2), arrowY - 10 * Math.sin(angle2));
                } else {
                    const angle1 = angle + 0.3;
                    const angle2 = angle - 0.3;
                    ctx.moveTo(arrowX, arrowY);
                    ctx.lineTo(arrowX + 10 * Math.cos(angle1), arrowY + 10 * Math.sin(angle1));
                    ctx.lineTo(arrowX + 10 * Math.cos(angle2), arrowY + 10 * Math.sin(angle2));
                }
                
                ctx.fill();
            }
            
            // Charge
            ctx.fillStyle = charge >= 0 ? '#ff0066' : '#00ccff';
            ctx.beginPath();
            ctx.arc(cx, cy, 20, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#000';
            ctx.font = 'bold 20px JetBrains Mono';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(charge >= 0 ? '+' : '‚àí', cx, cy);
        }

        window.addEventListener('load', () => {
            init();
            if (window.MathJax) MathJax.typesetPromise();
        });

        window.addEventListener('beforeunload', () => {
            if (state.timer.todaySeconds > 0) {
                const dayIndex = new Date().getDay();
                const additionalMinutes = Math.floor(state.timer.todaySeconds / 60);
                state.stats.weekStudyTime[dayIndex] += additionalMinutes;
                state.stats.totalStudyTime += state.timer.todaySeconds;
            }
            saveState();
        });
    </script>
</body>
</html>